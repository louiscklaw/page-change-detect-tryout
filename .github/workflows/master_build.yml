# https://docs.github.com/en/actions/reference/workflow-syntax-for-github-actions#on
# https://github.com/sdras/awesome-actions

name: github-actions-helloworld
on: [push, pull_request]

jobs:
  puppeteer_helloworld:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2
      env: # Or as an environment variable
        SLACK_TOKEN: ${{ secrets.SLACK_TOKEN }}
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}

      run: |
        cd helloworld-tryout
          sudo npm install -g concurrently live-server
          yarn
          concurrently -k "live-server --no-browser ." "node index.js" || true
        cd ..

  taobao_item_monitor:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2
      env: # Or as an environment variable
        SLACK_TOKEN: ${{ secrets.SLACK_TOKEN }}
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}

      run: |
        cd taobao-item-monitor
          yarn
          node index.js
        cd ..

  check_xiao_mi_9_pro_price:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2
      env: # Or as an environment variable
        SLACK_TOKEN: ${{ secrets.SLACK_TOKEN }}
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}

      run: |
        cd check-xiao-mi-9-pro-price
          yarn
          node index.js
        cd ..
